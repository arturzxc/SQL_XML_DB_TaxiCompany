/*Get all Client information*/SELECT ClientID as ID,extractValue(clientinfo,'/Client/CompanyName') as CompanyName,extractValue(clientinfo,'/Client/ClientType') as ClientType,extractValue(clientinfo,'/Client/Discount') as Discount,extractValue(clientinfo,'/Client/Street') as Street,extractValue(clientinfo,'/Client/HouseNo') as BuildingNo,extractValue(clientinfo,'/Client/PostCode') as PostCOde,extractValue(clientinfo,'/Client/City') as CityFROM Clients;/*Get clients and their bookings using XPath Expression combined with FLOWR*/Select BookingID, extractValue(bookinginfo ,'/Booking//ClientID') as ClientID,extractValue(clientinfo,'/Client/CompanyName') as CompanyName,XMLQuery('for $i in /Clientlet $street := $i/Streetlet $houseno := $i/HouseNolet $postcode := $i/PostCodelet $city := $i/Cityreturn concat($street," ",$houseno," ",$postcode," ",$city)'passing by value clientinforeturning content ) as Addressfrom Bookings,Clientswhere existsNode(bookinginfo,'/Booking//ClientID') > 0 AND extractValue(bookinginfo ,'/Booking//ClientID') = ClientID;/*Using Xpath to get client discount*/Select extractValue(clientinfo,'Client/Discount') as Discount FROM Clients WHERE clientid = 7;/*Count how many bookings a client has made in total*/select count(*) as Bookingsfrom Bookingswhere existsNode(bookingInfo, '/Booking//ClientID')>0AND extractValue(bookingInfo , 'Booking//ClientID') = 2;/*Find the next regular booking of a client*/Select BookingID,extractValue(bookinginfo,'/Booking/BookingInfo/RegularBooking/RepeatOn/PickUpDate') as PickUpDateFROM BookingsWHERE extractValue(bookinginfo,'/Booking/BookingInfo/@Type') = 'Regular'AND rownum = 1AND extractValue(bookinginfo,'/Booking//ClientID') = 7ORDER BY PickUpDate ASC;Select ClientID ,extractValue(clientinfo,'/Client/CompanyName') as CompanyNameFROM ClientsWHERE ClientID = 7;/*Update client Company Name*/UPDATE Clients SET ClientInfo =UPDATEXML(ClientInfo,'/Client/CompanyName/text()','Johns Paper Company')WHERE ClientID = 7;Select ClientID ,extractValue(clientinfo,'/Client/Discount') as DiscountFROM ClientsWHERE ClientID = 2;/*Update client Discount*/UPDATE Clients SET ClientInfo =UPDATEXML(ClientInfo,'/Client/Discount/text()','7.8')WHERE ClientID = 2;Select ClientID ,extractValue(clientinfo,'/Client/ClientType') as ClientTypeFROM ClientsWHERE ClientID = 3;/*Update client Type*/UPDATE Clients SET ClientInfo =UPDATEXML(ClientInfo,'/Client/ClientType/text()','Corporate')WHERE ClientID = 3;